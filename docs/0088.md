# SQL 注入

> 原文：<https://www.javatpoint.com/sql-injection>

SQL 注入是一种代码渗透技术，可能会导致我们的数据库丢失。通过网页输入在 SQL 语句中放置恶意代码是最常见的网络黑客技术之一。恶意用户可以利用 SQL 注入来操纵应用程序的网络服务器。

当我们要求用户输入他们的用户名/用户标识时，通常会出现 SQL 注入。用户给我们的不是一个名称或标识，而是一条我们会在不知不觉中在数据库上运行的 SQL 语句。例如——我们通过添加一个变量“demoUserID”来选择一个字符串，从而创建一个 SELECT 语句。该变量将从用户输入(getRequestString)中获取。

```

demoUserI = getrequestString("UserId");
demoSQL = "SELECT * FROM users WHERE UserId =" +demoUserId;

```

## SQL 注入袭击的类型

除了通过登录算法之外，SQL 注入可能会造成更大的伤害。SQL 注入的一些袭击包括:

*   更新、删除和插入数据:攻击者可以修改 cookies 来破坏 web 应用程序的数据库查询。
*   它正在服务器上执行命令，可以下载和安装恶意程序，如特洛伊木马。
*   我们正在将信用卡详细信息、电子邮件和密码等有价值的数据导出到攻击者的远程服务器。
*   获取用户登录详细信息:这是 SQL 注入最简单的形式。Web 应用程序通常通过表单接受用户输入，前端将用户输入传递给后端数据库进行处理。

## SQL 注入示例

我们有一个基于员工记录的应用程序。任何员工都只能通过输入唯一的私有员工标识来查看自己的记录。我们有一个类似员工标识的字段。员工在输入字段中输入以下内容:

236893238 或 1=1

它将转化为:

```

SELECT * from EMPLOYEE where EMPLOYEE_ID == 236893238 or 1=1

```

上面的 SQL 代码是有效的，并将从 EMPLOYEE 表中返回 EMPLOYEE_ID 行。1=1 将返回所有符合条件的记录。所有员工数据都被泄露；现在，恶意用户也可以类似地删除员工记录。

示例:

```

SELECT * from Employee where (Username == "" or 1=1) AND (Password="" or 1=1).

```

现在，恶意用户可以明智地使用' = '操作符来检索私有和安全的用户信息。因此，下面的查询不是上面提到的查询，而是在耗尽时检索受保护的数据，而不是向用户显示。

```

SELECT * from EMPLOYEE where (Employee_name =" " or 1=1) AND (Password=" " or 1=1)

```

## 基于批量 SQL 语句的 SQL 注入

几个数据库支持批量 SQL 语句。它是由两个或多个用分号分隔的 SQL 语句组成的组。

下面给出的 SQL 语句将返回雇员表中的所有行，然后删除雇员添加表。

```

SELECT * From Employee; DROP Table Employee_Add

```

## 如何检测 SQL 注入攻击

创建一个 SQL 注入攻击并不难，但是即使是最好的和善意的开发人员也会犯错。因此，检测 SQL 注入是造成 SQL 注入攻击风险的重要组成部分。网络应用防火墙可以检测和阻止基本的 SQL 注入攻击，但我们应该依赖它作为唯一的预防措施。

入侵检测系统既基于网络，也基于主机。它可以被调谐以检测 SQL 注入攻击。基于网络的 IDSec 可以监控到我们数据库服务器的所有连接，并标记可疑活动。基于主机的入侵检测系统可以监控网络服务器日志，并在发生奇怪的事情时发出警报。

## SQL 注入的影响

入侵者可以检索数据库中的所有用户数据，如用户详细信息、信用卡信息和社会安全号码，还可以访问管理员门户等受保护区域。也可以从表中删除用户数据。如今所有的网上购物应用、银行交易都使用后端数据库服务器。如果入侵者可以利用 SQL 注入，整个服务器就会受到威胁。

## 如何防范 SQL 注入攻击

*   我们应该使用用户身份验证，通过预定义长度、输入类型和输入字段来验证用户的输入。
*   限制用户的访问权限，并定义任何外部人员可以从数据库访问的数据量。通常，用户不能被授予访问数据库中所有内容的权限。
*   我们不应该使用系统管理员帐户。

* * *