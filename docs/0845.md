# 卡珊德拉建筑

> 原文:[https://www.javatpoint.com/cassandra-architecture](https://www.javatpoint.com/cassandra-architecture)

Cassandra 旨在处理跨多个节点的大数据工作负载，而没有单点故障。它有一个跨节点的对等分布式系统，数据分布在集群中的所有节点上。

*   在 Cassandra 中，每个节点都是独立的，同时与其他节点互连。集群中的所有节点都扮演相同的角色。
*   集群中的每个节点都可以接受读写请求，无论数据实际位于集群中的什么位置。
*   在一个节点出现故障的情况下，读/写请求可以从网络中的其他节点得到服务。

* * *

## 卡珊德拉的数据复制

在 Cassandra 中，集群中的节点充当给定数据的副本。如果一些节点响应了过期的值，Cassandra 将向客户端返回最新的值。在返回最近的值后，卡珊德拉在后台执行读取修复，以更新过时的值。

请参见下图，了解 Cassandra 如何在集群中的节点之间使用数据复制来确保没有单点故障的示意图。

![Cassandra Architecture 1](../Images/68019e9bc540e4ee9f23d90b01bab8f6.png)

* * *

## 卡珊德拉的组成部分

卡珊德拉的主要组成部分是:

*   **节点:**卡珊德拉节点是存储数据的地方。
*   **数据中心:**数据中心是相关节点的集合。
*   **集群:**集群是包含一个或多个数据中心的组件。
*   **提交日志:**在 Cassandra 中，提交日志是一种崩溃恢复机制。每个写操作都被写入提交日志。
*   **Mem-table:**Mem-table 是驻留在内存中的数据结构。提交日志后，数据将被写入 mem-table。有时，对于单列族，会有多个 mem-tables。
*   **表:**它是一个磁盘文件，当其内容达到阈值时，数据将从 mem-table 刷新到该文件。
*   **布隆过滤器:**这些只是快速的、不确定的算法，用于测试一个元素是否是集合的成员。这是一种特殊的缓存。每次查询后都会访问布隆过滤器。

* * *

## 卡珊德拉查询语言

卡珊德拉查询语言(CQL)用于通过其节点访问卡珊德拉。CQL 将数据库(键空间)视为表的容器。程序员使用 cqlsh:提示使用 CQL 或单独的应用程序语言驱动程序。

客户端可以访问任何节点进行读写操作。该节点(协调器)在客户端和保存数据的节点之间充当代理。

* * *

## 写操作

节点的每个写入活动都由写入节点的提交日志捕获。稍后，数据将被捕获并存储在 mem-table 中。每当 mem-table 已满时，数据将被写入 SStable 数据文件。所有写入都会自动分区并在整个集群中复制。卡珊德拉定期合并表，丢弃不必要的数据。

![Cassandra Architecture 2](../Images/d1da9153f182b205e5688ecf11b03ec2.png)

* * *

## 读取操作

在读取操作中，卡珊德拉从内存表中获取值，并检查布隆过滤器以找到包含所需数据的适当表。

协调员向副本发送三种类型的读取请求。

*   直接请求
*   摘要请求
*   读取维修请求

协调器向其中一个副本发送直接请求。之后，协调器将摘要请求发送到一致性级别指定的副本数量，并检查返回的数据是否是更新的数据。

之后，协调器向所有剩余的副本发送摘要请求。如果任何节点给出过期值，后台读取修复请求将更新该数据。这个过程叫做读修复机制。

![Cassandra Architecture 3](../Images/f7425a9566d392da47176152b238432c.png)

* * *