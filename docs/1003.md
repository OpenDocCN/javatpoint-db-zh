# http api

> 原文：<https://www.javatpoint.com/couchdb-http-api>

HTTP 请求用于与 CouchDB 通信。

通过使用这些请求，我们可以-

*   从数据库中检索数据
*   以文档的形式将数据存储到数据库中
*   查看并格式化存储在数据库中的文档。

* * *

## 请求格式

通信时，数据库使用不同的请求格式。这些请求格式是:获取、标题、发布、放置、删除和复制。

在 CouchDB 中，所有操作的输入数据和输出数据结构都将采用 JavaScript 对象符号(JSON)对象的形式。

查看用于与 CouchDB 通信的 HTTP 协议的不同请求格式。

**GET:**GET 请求格式用于获取特定项目。要获得不同的项目，你必须发送特定的网址模式。在使用这个 GET 请求的 CouchDB 中，我们可以以 JSON 文档的形式获取静态项、数据库文档和配置以及统计信息。

**HEAD:**HEAD 方法用于获取 get 请求的 HTTP 头，而不获取响应的正文。

**POST:**POST 请求用于上传数据。在 CouchDB 中，POST 请求主要用于设置值、上传文档、设置文档值，还可以启动某些管理命令。

**PUT:**PUT 请求用于创建新的对象、数据库、文档、视图和设计文档。

**DELETE:**DELETE 请求用于删除文档、视图和设计文档。

**COPY:**COPY 方法用于复制文档和对象。

* * *

## HTTP 请求头

应该提供 HTTP 头以获得正确的格式和编码。在将请求发送到 CouchDB 服务器时，HTTP 请求头与请求一起发送。以下是不同的 Http 请求头。

**内容类型:**内容类型头用于指定我们随请求提供给服务器的数据的内容类型。大多数情况下，我们随请求一起发送的内容类型是 MIME 类型或 JSON(应用程序/JSON)。强烈建议在请求中使用内容类型。

**Accept:**Accept 头用于指定服务器，即客户端可以理解的数据类型列表，这样服务器将使用这些数据类型发送响应。通常在这里，您可以发送客户端接受的 MIME 数据类型列表，用冒号分隔。

在 CouchDB 中，不需要在查询中使用 Accept，但强烈建议确保返回的数据可以由客户端处理。

* * *

## HTTP 响应头

HTTP 响应头是服务器发送的一种响应。这些标题给出了服务器作为响应发送的内容的信息。

有 4 种类型的响应头:

**内容类型:**内容类型响应头指定服务器返回数据的 MIME 类型。对于大多数请求，返回的 MIME 类型是文本/纯文本。

**缓存控制:**缓存控制响应头用于向客户端建议如何处理服务器发送的信息。CouchDB 大多返回必须重新验证的信息，这表明如果可能的话，应该对信息进行重新验证。

**内容长度:**内容长度头用于获取服务器发送的内容长度，以字节为单位。

**Etag:**Etag 标题用于显示文档或视图的修订。

* * *

## HTTP 头的状态代码

下表指定了 http 头发送的状态代码及其工作方式:

| 状态代码 | 描述 |
| 200 -好的 | 当请求成功完成时，会生成此状态。 |
| 201 -已创建 | 创建文档时会生成此状态。 |
| 202 -接受 | 该状态在请求被接受时生成。 |
| 404 -未找到 | 当服务器找不到请求的内容时，会发出此状态。 |
| 405 -不允许资源 | 当使用的 http 请求类型无效时，会发出此状态。 |
| 409 -冲突 | 每当有任何更新冲突时，都会发出此状态。 |
| 415 -错误的内容类型 | 此状态指定服务器不支持请求的内容类型。 |
| 500 -内部服务器错误 | 每当无效数据作为请求发送时，都会发出此状态。 |

* * *

## 与数据库交互的 HTTP 网址路径

下面列出了一些用于直接与数据库交互的网址路径。

| 统一资源定位器 | 操作 |
| 输出/分贝 | PUT url 用于创建新的数据库。 |
| 获取/数据库 | GET url 用于获取现有数据库的信息。 |
| 输入/输出/文件 | PUT url 用于创建文档/更新现有文档。 |
| 获取/数据库/文档 | GET url 用于获取文档。 |
| 删除/数据库/文档 | DELETE url 用于从指定的数据库中删除指定的文档。 |
| GET/db/_design/design-doc | 此 url 用于获取设计文档的定义。 |
| GET/db/_ design/design doc/_ view/view-name | 此 url 用于从指定的数据库访问设计文档中的视图、视图名称。 |