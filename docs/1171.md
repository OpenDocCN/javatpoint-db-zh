# 再分区

> 哎哎哎:# t0]https://www . javatppoint . com/redis-partitioning

分区用于将您的 Redis 数据分割成多个 Redis 实例，以便每个实例只包含您的键的子集。

它通常用于大型数据库。

## 分区的类型

redis 中有两种类型的分区:

*   范围划分
*   哈希分区

* * *

## 范围划分

范围分区是执行分区最简单的方法之一。这是通过将对象范围映射到特定的 Redis 实例中来实现的。

**例如:**

假设你有 3000 个用户。所以你可以说从 ID 0 到 ID 1000 的用户将进入实例 R0，而从 ID 1001 到 ID 2000 的用户将进入实例 R1，从 ID 2001 到 ID 3000 的用户将进入实例 R2，以此类推。

## 哈希分区

哈希分区是范围分区的替代方案。在哈希分区中，使用哈希函数将密钥转换为数字，然后将数据存储在不同的 Redis 实例中。

## Redis 分区的优势

*   分区便于您使用多台计算机的集体内存。例如:在大型数据库的情况下，您需要大量内存，因此分区提供了不同计算机的内存总和。没有分区，您只能使用单台计算机能够支持的有限内存。
*   分区还用于扩展多核和多台计算机的计算能力，以及多台计算机和网络适配器的网络带宽。

## Redis 分区的缺点

分区有一些缺点，因为 Redis 的一些特性被分区所阻碍。

*   分区通常不支持有多个键的操作。例如，如果两个集合存储在映射到不同 Redis 实例的键中，则不能执行它们之间的交集。
*   分区不支持具有多个键的事务。
*   分区粒度是关键，因此不可能像一个非常大的排序集那样用一个巨大的键来分割数据集。
*   当使用分区时，数据处理更加复杂，例如，您必须处理多个 RDB / AOF 文件，要备份数据，您需要从多个实例和主机聚合持久性文件。
*   添加和删除容量可能很复杂。例如，Redis Cluster 主要支持透明的数据重新平衡，能够在运行时添加和删除节点，但是客户端分区和代理等其他系统不支持这一功能。然而，一种叫做预分割的技术在这方面有所帮助。